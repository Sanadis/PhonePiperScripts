{
  "imports": [
    "_common-no_op"
  ],
  "vars": [{
    "name": "runs",
    "display": "Farm Runs",
    "value": "0",
    "type": "INT",
    "modify": "VISIBLE",
    "order": 5,
    "tierId": "stats",
    "description": "How many TMR runs have been accomplished"
  }, {
    "name": "caiross-dungeon",
    "display": "Level",
    "value": "1",
    "type": "INT",
    "modify": "EDITABLE",
    "order": 1,
    "tierId": "caiross",
    "values": [{
      "name": "Giants", "value": "0"}, {
      "name": "Dragons", "value": "1"}, {
      "name": "Necropolis", "value": "2"}
    ],
    "description": "Which level of Caiross dungeon to farm"
  }, {
    "name": "caiross-level",
    "display": "Level",
    "value": "1",
    "type": "INT",
    "modify": "EDITABLE",
    "order": 2,
    "tierId": "caiross",
    "values": [{
      "name": "B7", "value": "0"}, {
      "name": "B8", "value": "1"}, {
      "name": "B9", "value": "2"}, {
      "name": "B10", "value": "3"}
    ],
    "description": "Which level of Caiross dungeon to farm"
  }],
  "varTiers": [
    {"title":"Stats", "id":"stats"},
    {"title":"Caiross", "id":"caiross"}
  ],

  "states": {

    "farm_caiross": {
      "name": "Farm - Home to Caiross",
      "includes": [
        "_common-no_op"
      ],
      "variables": {
        "test": {"value": "1", "type": "INT"}
      },
      "statements": [{
        "condition": {
          "is": "BOOLEAN", "value": "true"
        },
        "actions": [{
          "type": "TAP", "value": "menu_home-battle"}, {
          "type": "WAIT", "value": "3000"}, {
          "type": "MOVE", "value": "caiross"}
        ]
      }]
    },

    "caiross": {
      "name": "Caiross Dungeon",
      "includes": [
        "_common-no_op"
      ],
      "statements": [{
        "condition": {
          "is": "SCREEN", "value": "menu_world"
        },
        "actions": [{
          "type": "INFO", "value": "Entering Caiross Dungeon"}, {
          "type": "TAP", "value": "menu_world-caiross"}, {
          "type": "RETURN"}
        ]
      }, {
        "condition": {
          "is": "SCREEN", "value": "menu_caiross"
        },
        "actions": [{
          "type": "INFO", "value": "Caiross found"}, {
          "type": "MOVE", "value": "caiross-select"}
        ]
      }]
    },

    "caiross-select": {
      "name": "Caiross Selection",
      "includes": [
        "team-select",
        "_common-no_op"
      ],
      "statements": [{
        "condition": {
          "is": "SCREEN", "value": "menu_caiross"
        },
        "actions": [{
          "type": "INFO", "value": "Selecting dungeon"}, {
          "type": "WAIT", "value": "500"}, {
          "type": "SWIPE_UP", "value": "menu_caiross_level-select"}, {
          "type": "WAIT", "value": "1500"}, {
          "type": "TAP", "value": "menu_caiross_level-index-${caiross-level}"}, {
          "type": "WAIT", "value": "1500"}, {
          "type": "REPEAT"}
        ]
      }]
    },

    "team-select": {
      "name": "Team Selection",
      "statements": [{
        "condition": {
          "is": "SCREEN", "value": "menu_unit-select"
        },
        "actions": [{
          "type": "ADD", "var": "runs", "value": "1"}, {
          "type": "INFO", "value": "Starting run ${runs}"}, {
          "type": "TAP", "value": "menu_unit-select_start"}, {
          "type": "WAIT", "value": "5000"}, {
          "type": "CALL", "value": "@keepAlive" }, {
          "type": "REPEAT"}
        ]
      }, {
        "condition": {
          "is": "SCREEN", "value": "menu_battle"
        },
        "actions": [{
          "type": "MOVE", "value": "caiross-battle"}
        ]
      }]
    },

    "caiross-battle": {
      "name": "Caiross Battle - Auto",
      "includes": [
        "caiross-battle_results",
        "_common-no_op"
      ],
      "statements": [{
        "condition": {
          "is": "SCREEN", "value": "menu_battle",
          "and": [{
            "is": "SCREEN", "value": "menu_battle-manual"
          }]
        },
        "actions": [{
          "type": "TAP", "value": "menu_battle-auto"}, {
          "type": "WAIT", "value": "5000"}, {
          "type": "REPEAT"}
        ]
      }, {
        "condition": {
          "is": "SCREEN", "value": "menu_battle"
        },
        "actions": [{
          "type": "WAIT", "value": "2000"}, {
          "type": "CALL", "value": "@keepAlive" }, {
          "type": "REPEAT"}
        ]
      }]
    },

    "caiross-battle_results": {3
      "name": "Caiross Battle - Results",
      "includes": [
        "_menu-battle_results-victory",
        "_menu-battle_results-failed",
        "_common-no_op"
      ]
    },

    "_menu-battle_results-victory": {
      "name": "Caiross Battle - Victory",
      "statements": [{
        "condition": {
          "is": "SCREEN", "value": "menu_battle-results"
        },
        "actions": [{
          "type": "INFO", "value": "Run ${runs} success"}, {
          "type": "TAP", "value": "menu_battle-results_continue"}, {
          "type": "WAIT", "value": "3000"}, {
          "type": "TAP", "value": "menu_battle-results_chest"}, {
          "type": "WAIT", "value": "3000"}, {
          "type": "REPEAT"}
        ]
      }]
    },

    "_menu-battle_results-failed": {
      "name": "Caiross Battle - Failed",
      "statements": [{
        "condition": {
          "is": "SCREEN", "value": "menu_battle-results_failed"
        },
        "actions": [{
          "type": "INFO", "value": "Run ${runs} failed"}, {
          "type": "TAP", "value": "menu_battle-results_failed-no"}, {
          "type": "WAIT", "value": "2000"}, {
          "type": "REPEAT"}
        ]
      }, {
        "condition": {
          "is": "SCREEN", "value": "menu_battle-results"
        },
        "actions": [{
          "type": "INFO", "value": "Run ${runs} failed results"}, {
          "type": "TAP", "value": "menu_battle-results_continue"}, {
          "type": "WAIT", "value": "2000"}, {
          "type": "REPEAT"}
        ]
      }, {
        "condition": {
          "is": "SCREEN", "value": "menu_battle-results_failed-options"
        },
        "actions": [{
          "type": "INFO", "value": "Run ${runs} failed options"}, {
          "type": "TAP", "value": "menu_battle-results_failed-prepare"}, {
          "type": "WAIT", "value": "2000"}, {
          "type": "MOVE", "value": "team-select"}
        ]
      }]
    }

  }
}