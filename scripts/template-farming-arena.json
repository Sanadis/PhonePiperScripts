{
  "vars": [
  ],
  "includes": [
  ],
  "states": {
    "arena-battle-setup": {
      "name": "Arena - Battle - Setup (Override)",
      "description":"Setup each unit and start the fight",
      "includes": [
        "_arena-battle-fight",
        "_common-no_op"
      ],
      "statements": [
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle-repeat",
            "and": [
              {
                "is": "SCREEN",
                "value": "battle-unit-3_ready"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-3_mp"
              }
            ],
            "andOr": [
              {
                "is": "SCREEN",
                "value": "battle-unit-0_stop"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-1_stop"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-2_stop"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-4_stop"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Stop has been detected, trying to resolve"
            },
            {
              "type": "SET",
              "value": "1",
              "var": "setup"
            },
            {
              "type": "SWIPE_RIGHT",
              "value": "battle-unit_3"
            },
            {
              "type": "WAIT",
              "value": "200"
            },
            {
              "type": "SLOW_UP",
              "value": "battle-skill-top-slider",
              "count": "4"
            },
            {
              "type": "TAP",
              "value": "battle-skill-top-5",
              "count": "1"
            },
            {
              "type": "TAP",
              "value": "battle-unit_3",
              "count": "2"
            },
            {
              "type": "WAIT",
              "value": "3000"
            },
            {
              "type": "TAP",
              "value": "battle-reload"
            },
            {
              "type": "WAIT",
              "value": "1000"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle-repeat",
            "and": [
              {
                "is": "SCREEN",
                "value": "battle-unit-3_ready"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-3_mp"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Ayaka heals"
            },
            {
              "type": "SET",
              "value": "0",
              "var": "setup"
            },
            {
              "type": "SWIPE_RIGHT",
              "value": "battle-unit_3"
            },
            {
              "type": "WAIT",
              "value": "200"
            },
            {
              "type": "SLOW_UP",
              "value": "battle-skill-top-slider",
              "count": "2"
            },
            {
              "type": "TAP",
              "value": "battle-skill-top-5",
              "count": "1"
            },
            {
              "type": "TAP",
              "value": "battle-unit_3",
              "count": "2"
            },
            {
              "type": "WAIT",
              "value": "3000"
            },
            {
              "type": "TAP",
              "value": "battle-reload"
            },
            {
              "type": "WAIT",
              "value": "1000"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle-repeat",
            "and": [
              {
                "is": "SCREEN",
                "value": "battle-unit-1_ready"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-1_mp"
              },
              {
                "not": "SCREEN",
                "value": "battle-unit-1_ability"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Setting Up GLS"
            },
            {
              "type": "SWIPE_RIGHT",
              "value": "battle-unit_1"
            },
            {
              "type": "WAIT",
              "value": "200"
            },
            {
              "type": "SLOW_UP",
              "value": "battle-skill-top-slider",
              "count": "7"
            },
            {
              "type": "TAP",
              "value": "battle-skill-top-2"
            },
            {
              "type": "WAIT",
              "value": "200"
            },
            {
              "type": "SLOW_DOWN",
              "value": "battle-skill-top-slider"
            },
            {
              "type": "TAP",
              "value": "battle-skill-top-3",
              "count": "2"
            },
            {
              "type": "WAIT",
              "value": "300"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle-repeat",
            "and": [
              {
                "is": "SCREEN",
                "value": "battle-unit-4_ready"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-4_mp"
              },
              {
                "not": "SCREEN",
                "value": "battle-unit-4_ability"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Setting Up TT"
            },
            {
              "type": "SWIPE_RIGHT",
              "value": "battle-unit_4"
            },
            {
              "type": "WAIT",
              "value": "200"
            },
            {
              "type": "SLOW_UP",
              "value": "battle-skill-top-slider",
              "count": "8"
            },
            {
              "type": "TAP",
              "value": "battle-skill-top-5"
            },
            {
              "type": "WAIT",
              "value": "300"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle-repeat",
            "and": [
              {
                "is": "SCREEN",
                "value": "battle-unit-0_ready"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-0_mp"
              },
              {
                "not": "SCREEN",
                "value": "battle-unit-0_ability"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Setting Up Adam J"
            },
            {
              "type": "SWIPE_RIGHT",
              "value": "battle-unit_0"
            },
            {
              "type": "WAIT",
              "value": "200"
            },
            {
              "type": "SLOW_UP",
              "value": "battle-skill-top-slider",
              "count": "10"
            },
            {
              "type": "TAP",
              "value": "battle-skill-top-2"
            },
            {
              "type": "WAIT",
              "value": "300"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle-repeat",
            "and": [
              {
                "is": "SCREEN",
                "value": "battle-unit-2_ready"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-2_mp"
              },
              {
                "not": "SCREEN",
                "value": "battle-unit-2_ability"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Setting Up Olive"
            },
            {
              "type": "SWIPE_RIGHT",
              "value": "battle-unit_2"
            },
            {
              "type": "WAIT",
              "value": "200"
            },
            {
              "type": "SLOW_UP",
              "value": "battle-skill-top-slider",
              "count": "7"
            },
            {
              "type": "TAP",
              "value": "battle-skill-top-2"
            },
            {
              "type": "WAIT",
              "value": "300"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle-repeat"
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Starting Fight"
            },
            {
              "type": "BATCH",
              "value": "start"
            },
            {
              "type": "TAP",
              "value": "battle-unit_3"
            },
            {
              "type": "TAP",
              "value": "battle-unit_4"
            },
            {
              "type": "TAP",
              "value": "battle-unit_1"
            },
            {
              "type": "TAP",
              "value": "battle-unit_0"
            },
            {
              "type": "TAP",
              "value": "battle-unit_2"
            },
            {
              "type": "BATCH",
              "value": "end"
            },
            {
              "type": "MSG",
              "value": "Moving to Fight"
            },
            {
              "type": "MOVE",
              "value": "arena-battle-fight"
            }
          ]
        }
      ]
    },
    "arena-battle-fight": {
      "name": "Arena - Battle - Fight (Override)",
      "description":"Continue fighting if every unit is fine, otherwise return to setup step.",
      "includes": [
        "_arena-battle-fight",
        "_common-no_op"
      ],
      "statements": [
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle-repeat",
            "andOr": [
              {
                "is": "SCREEN",
                "value": "battle-unit-0_stop"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-1_stop"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-2_stop"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-4_stop"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Stop has been detected, reverting to setup phase to fix"
            },
            {
              "type": "MOVE",
              "value": "arena-battle-setup"
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle-repeat",
            "and": [
              {
                "is": "EQUAL",
                "var": "setup",
                "value": "1"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Ayaka needs to be reset, reverting to setup phase to fix"
            },
            {
              "type": "MOVE",
              "value": "arena-battle-setup"
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle-repeat"
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Fighting even more"
            },
            {
              "type": "TAP",
              "value": "battle-reload"
            },
            {
              "type": "TAP",
              "value": "battle-unit_3"
            },
            {
              "type": "WAIT",
              "value": "2000"
            },
            {
              "type": "TAP",
              "value": "battle-repeat"
            },
            {
              "type": "BATCH",
              "value": "start"
            },
            {
              "type": "TAP",
              "value": "battle-unit_4"
            },
            {
              "type": "TAP",
              "value": "battle-unit_1"
            },
            {
              "type": "TAP",
              "value": "battle-unit_0"
            },
            {
              "type": "TAP",
              "value": "battle-unit_2"
            },
            {
              "type": "BATCH",
              "value": "end"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        }
      ]
    }
  }
}