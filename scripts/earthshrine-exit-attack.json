{
  "vars": [
    {
      "name": "loops",
      "value": "0",
      "type": "INT"
    },
    {
      "name": "setup",
      "value": "0",
      "type": "INT"
    },
    {
      "name": "items",
      "value": "1000",
      "type": "INT"
    },
    {
      "name": "runs",
      "value": "0",
      "type": "INT"
    }
  ],
  "states": {
    "main": {
      "name": "Earth Shrine - Menu",
      "statements": [
        {
          "condition": {
            "is": "SCREEN",
            "value": "es-mission-select",
            "and": [
              {
                "is": "ENERGY",
                "value": "3"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Starting ACTION"
            },
            {
              "type": "TAP",
              "value": "menu-mission_list-item_2"
            },
            {
              "type": "WAIT",
              "value": "3000"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-goal_list",
            "and": [
              {
                "is": "SCREEN",
                "value": "menu-goal_list-next"
              }
            ]
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-goal_list-next"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-friend_select"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-friend_select-item_0"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-depart"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-depart-depart"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-energy_recovery"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-energy_recovery-back"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle"
          },
          "actions": [
            {
              "type": "SET",
              "var": "loops",
              "value": "0"
            },
            {
              "type": "ADD",
              "var": "runs",
              "value": "1"
            },
            {
              "type": "MSG",
              "value": "Starting run ${runs}"
            },
            {
              "type": "SWAP",
              "value": "game-battle"
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-connection_error"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-connection_error-ok"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-connection_error_2"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-connection_error_2-ok"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "var": "loops",
            "is": "GREATER",
            "value": "900"
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Too many cycles, stopping run"
            },
            {
              "type": "STOP",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "BOOLEAN",
            "value": "true"
          },
          "actions": [
            {
              "type": "ADD",
              "value": "1",
              "var": "loops"
            },
            {
              "type": "MSG",
              "value": "No-Op ${loops}"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        }
      ]
    },
    "game-battle": {
      "name": "Battle",
      "statements": [
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle",
            "and": [
              {
                "is": "SCREEN",
                "value": "game-battle-auto_off"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-0_ready"
              },
              {
                "is": "EQUAL",
                "var": "setup",
                "value": "2"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Unit 5 setup and Repeat"
            },
            {
              "type": "SET",
              "var": "setup",
              "value": "1"
            },
            {
              "type": "BATCH",
              "value": "START"
            },
            {
              "type": "SWIPE_DOWN",
              "value": "battle-unit_5"
            },
            {
              "type": "TAP",
              "value": "battle-unit_5"
            },
            {
              "type": "TAP",
              "value": "battle-unit_5"
            },
            {
              "type": "TAP",
              "value": "battle-repeat"
            },
            {
              "type": "BATCH",
              "value": "END"
            },
            {
              "type": "WAIT",
              "value": "1000"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle",
            "and": [
              {
                "is": "SCREEN",
                "value": "game-battle-auto_off"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-0_ready"
              },
              {
                "is": "EQUAL",
                "var": "setup",
                "value": "0"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Unit setup and Repeat"
            },
            {
              "type": "SET",
              "var": "loops",
              "value": "0"
            },
            {
              "type": "SET",
              "var": "setup",
              "value": "1"
            },
            {
              "type": "BATCH",
              "value": "START"
            },
            {
              "type": "SWIPE_DOWN",
              "value": "battle-unit_3"
            },
            {
              "type": "TAP",
              "value": "battle-unit_3"
            },
            {
              "type": "TAP",
              "value": "battle-unit_3"
            },
            {
              "type": "SWIPE_DOWN",
              "value": "battle-unit_4"
            },
            {
              "type": "TAP",
              "value": "battle-unit_4"
            },
            {
              "type": "TAP",
              "value": "battle-unit_4"
            },
            {
              "type": "SWIPE_DOWN",
              "value": "battle-unit_5"
            },
            {
              "type": "TAP",
              "value": "battle-unit_5"
            },
            {
              "type": "TAP",
              "value": "battle-unit_5"
            },
            {
              "type": "TAP",
              "value": "battle-unit_0"
            },
            {
              "type": "TAP",
              "value": "battle-unit_1"
            },
            {
              "type": "TAP",
              "value": "battle-unit_2"
            },
            {
              "type": "BATCH",
              "value": "END"
            },
            {
              "type": "WAIT",
              "value": "1000"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "game-battle",
            "and": [
              {
                "is": "SCREEN",
                "value": "game-battle-auto_off"
              },
              {
                "is": "SCREEN",
                "value": "battle-unit-0_ready"
              },
              {
                "is": "EQUAL",
                "var": "setup",
                "value": "1"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Repeat"
            },
            {
              "type": "SET",
              "var": "loops",
              "value": "0"
            },
            {
              "type": "BATCH",
              "value": "START"
            },
            {
              "type": "TAP",
              "value": "battle-repeat"
            },
            {
              "type": "BATCH",
              "value": "END"
            },
            {
              "type": "WAIT",
              "value": "1000"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-connection_error"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-connection_error-ok"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-connection_error_2"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-connection_error_2-ok"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-results-points"
          },
          "actions": [
            {
              "type": "SET",
              "var": "setup",
              "value": "2"
            },
            {
              "type": "SET",
              "var": "loops",
              "value": "0"
            },
            {
              "type": "SWAP",
              "value": "menu-results"
            }
          ]
        },
        {
          "condition": {
            "var": "loops",
            "is": "GREATER",
            "value": "20",
            "and": [
              {
              "is": "SCREEN",
              "value": "game-battle-auto_off"
              }
            ]
          },
          "actions": [
            {
              "type": "TAP",
              "value": "battle-auto"
            },
            {
              "type": "WAIT",
              "value": "1000"
            },
            {
              "type": "SET",
              "var": "loops",
              "value": "0"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "var": "loops",
            "is": "GREATER",
            "value": "900"
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Too many cycles, stopping run"
            },
            {
              "type": "STOP",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "BOOLEAN",
            "value": "true"
          },
          "actions": [
            {
              "type": "ADD",
              "value": "1",
              "var": "loops"
            },
            {
              "type": "MSG",
              "value": "No-Op ${loops}"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        }
      ]
    },
    "menu-results": {
      "name": "Results",
      "statements": [
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-results-points"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-results-next"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-results-units"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-results-next"
            },
            {
              "type": "WAIT",
              "value": "500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-results-items"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-results-next"
            },
            {
              "type": "WAIT",
              "value": "500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-connection_error"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-connection_error-ok"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-connection_error_2"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-connection_error_2-ok"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-friend_request"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-friend_request-no"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-daily-notice"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-daily-close"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "es-mission-select",
            "or": [
              {
              "is": "SCREEN",
              "value": "menu-goal_list"
              }
            ]
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Ending run ${runs}"
            },
            {
              "type": "MOVE",
              "value": "main"
            }
          ]
        },
        {
          "condition": {
            "is": "SCREEN",
            "value": "menu-energy_recovery"
          },
          "actions": [
            {
              "type": "TAP",
              "value": "menu-energy_recovery-back"
            },
            {
              "type": "WAIT",
              "value": "1500"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "var": "loops",
            "is": "GREATER",
            "value": "900"
          },
          "actions": [
            {
              "type": "MSG",
              "value": "Too many cycles, stopping run"
            },
            {
              "type": "STOP",
              "value": ""
            }
          ]
        },
        {
          "condition": {
            "is": "BOOLEAN",
            "value": "true"
          },
          "actions": [
            {
              "type": "ADD",
              "value": "1",
              "var": "loops"
            },
            {
              "type": "MSG",
              "value": "No-Op ${loops}"
            },
            {
              "type": "REPEAT",
              "value": ""
            }
          ]
        }
      ]
    }
  }
}